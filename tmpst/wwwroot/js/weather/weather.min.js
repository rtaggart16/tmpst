function submitWeatherRequest(n){let r=$("#method-type-select").val(),t=$("#input-type-select").val(),i="",u=validateLocationInput(t);u==!0?(i=t=="latlng"?$("#latitude-input").val()+","+$("#longitude-input").val():$("#name-or-postcode-input").val(),resetWeatherPage(),contactAPI(r,i,n)):t=="latlng"?Swal.fire({type:"error",title:"Invalid Input",text:"You must specify both a latitude and a longitude"}):Swal.fire({type:"error",title:"Invalid Input",text:"You must specify a Postcode or a Place Name"})}function contactAPI(n,t,i){let r="https://api.apixu.com/v1/"+n+".json?key="+i+"&q="+t;n=="forecast"&&(r=r+"&days=7");$.ajax({type:"GET",url:r,contentType:"application/json",success:function(t){if(console.log("AJAX Response: ",t),n=="forecast"){let n=[];currentForecastDataset=t.forecast;$.each(t.forecast.forecastday,function(t,i){let r=new Date(i.date);n.push(r)});let i=window.matchMedia("only screen and (max-width: 760px)").matches;i==!0?(updateForecastTableBodyMobile(t.forecast.forecastday),$("#wizard-collapse-expand").click().promise().done(function(){initMap(t.location.lat,t.location.lon,t.location.name,"result-map");console.log("REACHED FADE INS");$("#weather-map-container").fadeIn(300).promise().done(function(){console.log("MAP FADED IN");$("#weather-forecast-data-container-mobile").fadeIn(300)})})):(currentForecastDataset=t.forecast,updateForecastTableHead(n),updateForecastTableBody(t.forecast.forecastday),$("#wizard-collapse-expand").click().promise().done(function(){initMap(t.location.lat,t.location.lon,t.location.name,"result-map");console.log("REACHED FADE INS");$("#weather-map-container").fadeIn(300).promise().done(function(){console.log("MAP FADED IN");$("#weather-forecast-data-container").fadeIn(300)})}))}else updateCurrentWeatherDataContainers(t),currentDayDataset=t.current,$("#wizard-collapse-expand").click().promise().done(function(){initMap(t.location.lat,t.location.lon,t.location.name,"current-weather-result-map");$("#weather-current-data-container").fadeIn(300)})},error:function(n){console.log("ERROR: ",n.statusText);n.statusText=="error"&&Swal.fire({type:"error",title:"Data Request Error",text:"An error has occurred when submitting your request. Please try again with different criteria"})}})}function updateCurrentWeatherDataContainers(n){$("#current-weather-icon-container").append('<img src="'+n.current.condition.icon+'" />');$("#current-weather-condition-container").append("<span><strong>Condition: <\/strong>"+n.current.condition.text+"<\/span>");$("#current-weather-temp-container").append("<span><strong>Temperature: <\/strong>"+n.current.temp_c+"&#8451<\/span>");$("#current-weather-feel-temp-container").append("<span><strong>Feels Like: <\/strong>"+n.current.feelslike_c+"&#8451<\/span>");$("#current-weather-wind-dir-container").append("<span><strong>Wind Direction: <\/strong>"+n.current.wind_dir+"<\/span>");$("#current-weather-wind-speed-container").append("<span><strong>Wind Speed(mph): <\/strong>"+n.current.wind_mph+"<\/span>")}function updateForecastTableHead(n){let t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];$("#forecast-tbl-head").append('<tr id="temp-tbl-head-row"><\/tr>');$.each(n,function(n,i){let r=t[i.getDay()];$("#temp-tbl-head-row").append("<th>"+r+"<\/th>")})}function updateForecastTableBody(n){let t=[],i=[],r=[],u=[];$.each(n,function(n,f){t.push(f.day.condition.icon);i.push(f.day.avgtemp_c);r.push(f.day.maxtemp_c);u.push(f.day.condition.text)});console.log("ICONS",t);console.log("AVGTEMPS",i);console.log("MAXTEMPS",r);console.log("CONDITIONS",u);$("#forecast-tbl-body").append('<tr><td><img src="'+t[0]+'" /><\/td><td><img src="'+t[1]+'" /><\/td><td><img src="'+t[2]+'" /><\/td><td><img src="'+t[3]+'" /><\/td><td><img src="'+t[4]+'" /><\/td><td><img src="'+t[5]+'" /><\/td><td><img src="'+t[6]+'" /><\/td><\/tr>');$("#forecast-tbl-body").append("<tr><td>"+u[0]+"<\/td><td>"+u[1]+"<\/td><td>"+u[2]+"<\/td><td>"+u[3]+"<\/td><td>"+u[4]+"<\/td><td>"+u[5]+"<\/td><td>"+u[6]+"<\/td><\/tr>");$("#forecast-tbl-body").append("<tr><td><strong>Max Temp<\/strong> - "+r[0]+"<\/td><td><strong>Max Temp<\/strong> - "+r[1]+"&#8451<\/td><td><strong>Max Temp<\/strong> - "+r[2]+"&#8451<\/td><td><strong>Max Temp<\/strong> - "+r[3]+"&#8451<\/td><td><strong>Max Temp<\/strong> - "+r[4]+"&#8451<\/td><td><strong>Max Temp<\/strong> - "+r[5]+"&#8451<\/td><td><strong>Max Temp<\/strong> - "+r[6]+"&#8451<\/td><\/tr>");$("#forecast-tbl-body").append("<tr><td><strong>Avg Temp<\/strong> - "+i[0]+"<\/td><td><strong>Avg Temp<\/strong> - "+i[1]+"&#8451<\/td><td><strong>Avg Temp<\/strong> - "+i[2]+"&#8451<\/td><td><strong>Avg Temp<\/strong> - "+i[3]+"&#8451<\/td><td><strong>Avg Temp<\/strong> - "+i[4]+"&#8451<\/td><td><strong>Avg Temp<\/strong> - "+i[5]+"&#8451<\/td><td><strong>Avg Temp<\/strong> - "+i[6]+"&#8451<\/td><\/tr>")}function updateForecastTableBodyMobile(n){let t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];$.each(n,function(n,i){let r=new Date(i.date),u=t[r.getDay()];$("#forecast-tbl-body-mobile").append("<tr><td><strong>"+u+'<\/strong><\/td><td><img src="'+i.day.condition.icon+'" /><\/td><td><strong>Avg. Temp: <\/strong>'+i.day.avgtemp_c+"&#8451 <\/td>")})}function analyseForecastData(){let n=[],t=[],i=[],r=[],u=[],f=[];$.each(currentForecastDataset.forecastday,function(e,o){n.push(o.date);console.log("VAL ",o);t.push(o.day.avgtemp_c);i.push(o.day.maxtemp_c);r.push(o.day.mintemp_c);u.push(o.day.avghumidity);f.push(o.day.avgvis_miles)});console.log("LABELS ",n);console.log("AVG TEMP ",t);console.log("MAX TEMP ",i);console.log("MIN TEMP",r);console.log("HUMIDIDTY",u);console.log("VISIBILITY",f);var e=document.getElementById("forecast-overall-chart").getContext("2d"),o=new Chart(e,{type:"bar",data:{datasets:[{label:"Average Temperature",data:t,borderColor:forecastAnalysisPallet.Avg_Temp},{label:"Max Temperature",data:i,borderColor:forecastAnalysisPallet.Max_Temp,type:"line"},{label:"Min Temperature",data:r,borderColor:forecastAnalysisPallet.Min_Temp,type:"line"},{label:"Humidity",data:u,borderColor:forecastAnalysisPallet.Humidity,type:"line"},{label:"Visibility",data:f,borderColor:forecastAnalysisPallet.Visibility,type:"line"}],labels:n},options:{maintainAspectRatio:!1}});$("#forecast-weather-analysis-landing").fadeIn(300).promise().done(function(){$("#weather-analysis-landing").fadeIn(300)})}function analyseCurrentDayData(){let n=[currentDayDataset.temp_c,currentDayDataset.feelslike_c,currentDayDataset.humidity,currentDayDataset.wind_mph],t=[currentDayAnalysisPallet.Current_Temp,currentDayAnalysisPallet.Feels_Like,currentDayAnalysisPallet.Humidity,currentDayAnalysisPallet.Wind_Speed],r={data:n,borderColor:t};var i=document.getElementById("current-day-chart").getContext("2d"),u=new Chart(i,{type:"bar",data:{labels:["Current Temp","Feels Like","Humidity","Wind (mph)"],datasets:[{label:[],data:n,backgroundColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)"]}]},options:{legend:{display:!1},maintainAspectRatio:!1}});$("#current-weather-analysis-landing").fadeIn(300).promise().done(function(){$("#weather-analysis-landing").fadeIn(300)})}function validateLocationInput(n){if(n=="latlng"){let n=$("#latitude-input").val(),t=$("#longitude-input").val();return n!=" "&&n!=""&&t!=" "&&t!=""?!0:!1}let n=$("#name-or-postcode-input").val();return n!=""&&n!=" "?!0:!1}let currentForecastDataset={},currentDayDataset={};$("#input-type-select").on("change",function(){console.log($("#input-type-select").val());let n=$("#input-type-select").val();n=="latlng"?$("#name-and-postcode-input-container").fadeOut(300).promise().done(function(){$("#lat-long-input-container").fadeIn(300)}):$("#lat-long-input-container").fadeOut(300).promise().done(function(){$("#name-and-postcode-input-container").fadeIn(300)})});$("#wizard-collapse-expand").click(function(){$("#weather-wizard-container").slideToggle("slow",function(){$("#weather-wizard-container").is(":visible")?$("#weather-wizard-arrow-down").fadeOut().promise().done(function(){$("#weather-wizard-arrow-up").fadeIn();$("#weather-wizard-collapsed-title").fadeOut()}):$("#weather-wizard-arrow-up").fadeOut().promise().done(function(){$("#weather-wizard-arrow-down").fadeIn();$("#weather-wizard-collapsed-title").fadeIn()})})});$("#name-or-postcode-input").on("keypress",function(n){n.which==13&&$("#submit-weather-request-btn").click()});$("#longitude-input").on("keypress",function(n){n.which==13&&$("#submit-weather-request-btn").click()});$("#latitude-input").on("keypress",function(n){n.which==13&&($("#longitude-input").val()!=""&&$("#longitude-input").val()!=" "?$("#submit-weather-request-btn").click():Swal.fire({type:"error",title:"Invalid Request",text:"You must specify both a latitude and a longitude"}))});$("btn btn-success w-100").click(function(){$("current-map-collapse-expand").click();$("current-weather-collapse-expand").click()});